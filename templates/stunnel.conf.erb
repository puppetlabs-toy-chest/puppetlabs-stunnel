; This stunnel-<%= @name -%> config is managed by Puppet.

<% if @chroot_real -%>
; Note that pid is created inside of the chroot jail
chroot = <%= @chroot_real -%>
<% end -%>

<% if @compression -%>
compression = <%= @compression %>
<% end -%>

<% if @debug_level -%>
; Set our debug level
debug = <%= debug_level %>
<% end -%>

<% if @fips_on -%>
fips = <%= @fips_on %>
<% end -%>

<% if @foreground_on -%>
foreground = <%= @foreground_on %>
<% end -%>

<% if @log -%>
log = <%= @log %>
<% end -%>

<% if @output_real -%>
output = <%= @output_real %>
<% end -%>

<% if @pid_file -%>
pid = <%= @pid_file %>
<% end -%>

<% if @group -%>
setgid = <%= @group %>
<% end -%>

<% if @user -%>
setuid = <%= @user %>
<% end -%>

<% if @sockets and !@sockets.empty? -%>
; Some performance tunings
<% sockets.each do |sock| -%>
socket = <%= @sock %>
<% end -%>
<% end -%>

<% if @syslog_on -%>
syslog = <%= @syslog_on %>
<% end -%>

[<%= @name -%>]
<% if @accept_server and @accept_port -%>
accept = <%= @accept_server -%>:<%= @accept_port -%>
<% elsif @accept -%>
accept = <%= @accept -%>
<% end -%>

<% if @ca_dir -%>
CApath = <%= @ca_dir %>
<% end -%>

<% if @ca_file -%>
CAfile = <%= @ca_file %>
<% end -%>

<% if @certificate and !@certificate.empty? -%>
cert = <%= @certificate %>
<% end -%>

<% if @ciphers -%>
ciphers = <%= @ciphers %>
<% end -%>

<% if @client_on -%>
client = <%= @client_on %>
<% end -%>

<% if @connect_server and @connect_port -%>
connect = <%= @connect_server -%>:<%= @connect_port -%>
<% elsif @connect -%>
connect = <%= @connect %>
<% end -%>

<% if @crl_dir and !@crl_dir.empty? -%>
CRLpath = <%= @crl_dir %>
<% end -%>

<% if @crl_file and !@crl_file.empty? -%>
CRLfile = <%= @crl_file %>
<% end -%>

<% if @options and !@options.empty? -%>
<% options.each do |option| -%>
options = <%= @option %>
<% end -%>
<% end -%>

<% if @private_key and !@private_key.empty? -%>
key = <%= @private_key %>
<% end -%>

<% if @protocol and !@protocol.empty? -%>
protocol = <%= @protocol %>
<% end -%>

<% if @ssl_version_real and !@ssl_version_real.empty? -%>
sslVersion = <%= ssl_version_real %>
<% end -%>

<% if @verify_stun and !@verify_stun.empty? -%>
verify = <% @verify_stun %>
<% end -%>
